# 第一部分 圣遗物的参数

首先明确一个圣遗物的所有参数：

1. 套装
2. 部位(5种，3bit)
3. 星级(5种，3bit)(有其他的压缩方法可以降至2bit或1bit，本规则不予采用)
4. 等级(0-20，5bit)
5. 主词条(18种，5bit)
6. 4个副词条(10+1种，(4*4bit))
7. 4个副词条的强化等级(0-60，4*6bit)

其中套装的种类数不定且在不断增加，副词条除了10种可能存在的词条外还有一种不存在的情况，副词条每次强化可能获得0.7倍、0.8倍、0.9倍、1.0倍四种强化结果，同一词条最多强化6次（初始一次，4、8、12、16、20级各一次），所以上限为6倍，乘10存储即为60。

# 第二部分 圣遗物的存储顺序

考虑不同的参数的重要性/常用性：

1. 当大家谈论圣遗物时，一般默认星级为5星。少数情况为4星或更低
2. 当大家谈论一个圣遗物的属性时，有较大概率默认其套装正确、部位、主词条正确
3. 圣遗物的副词条和其强化等级密不可分
4. 套装是不断增加的，套装的数量没有上限
5. 部分情况下，程序作者并不在意圣遗物的部分参数（见下：省略部分参数存储规则）

所以采用以下顺序（从高比特位到低比特位）存储圣遗物：

>  套装-星级-部位-等级-主词条-副词条4-副词条4强化等级-副词条3-副词条3强化等级-副词条2-副词条2强化等级-副词条1-副词条1强化等级

即：一个64位数的最低40位（0-39位），每10位存储一个副词条。其中高4位存储种类，低4位存储强化等级。40-44位存储主词条类型，45-49位存储圣遗物等级，50-52位存储圣遗物部位，53-55位存储圣遗物星级，56-63位存储套装。

在存储至硬盘时，使用**小端序**存储。在处理数据时，尽量使用**无符号**整数

## 省略部分参数存储规则

部分情况下，程序作者并不在意圣遗物的部分参数。例如，分析圣遗物有效副词条数的程序并不在意圣遗物的套装、星级、部位、等级、主词条等，在这种情况下，这些部位可以置0不写。

# 第三部分 圣遗物参数的编号

接下来需要为所有的参数定义编号

## 星级

考虑到以下内容人们对五星圣遗物的关心程度普遍高于低星圣遗物，做如下规定：

若星级位为1-5，即为对应星级圣遗物。

特殊地，若星级位为0，则默认为5星圣遗物。

若星级位为其他值，则为非法圣遗物。

## 部位

为了迎合省略部分参数存储规则，圣遗物部位从1开始，按照游戏内顺序编号：

1. 生之花
2. 死之羽
3. 时之沙
4. 空之杯
5. 理之冠

## 等级

等级直接进行存储

## 词条

0即没有词条（主要出现在副词条，意为副词条为空）

为了保证主词条与副词条统一，优先编号副词条存在的词条

1. 生命值
2. 百分比生命值
3. 攻击力
4. 百分比攻击力
5. 防御力
6. 百分比防御力
7. 元素精通
8. 元素充能效率
9. 暴击率
10. 暴击伤害

观察到数值为非百分比词条当且仅当词条编号小于8且为奇数。

11. 治疗百分比加成
12. 物理伤害加成
13. 风元素伤害加成
14. 岩元素伤害加成
15. 雷元素伤害加成
16. 水元素伤害加成
17. 冰元素伤害加成
18. 火元素伤害加成

## 强化等级

副词条每次强化可能获得0.7倍、0.8倍、0.9倍、1.0倍四种强化结果，同一词条最多强化6次（初始一次，4、8、12、16、20级各一次），所以上限为6倍，乘10存储。

如：7即词条只有一次强化，且为最低档。60即初始四副词条圣遗物在升到20级过程中所有强化机会全强化了该副词条，且全为最高档强化（什么欧皇）

若副词条不存在，则强化等级置0

## 套装

2.4版本及以前出现的圣遗物按照游戏内图鉴的套装顺序从1开始编号。2.5版本及以后的圣遗物按照版本顺序依次排列。同一版本的不同新圣遗物按游戏内图鉴顺序排列。

1. 冒险家
2. 幸运儿
3. 游医
4. 行者之心
5. 奇迹
6. 战狂
7. 教官
8. 流放者
9. 守护之心
10. 勇士之心
11. 武人
12. 赌徒
13. 学士
14. 祭火之人
15. 祭水之人
16. 祭雷之人
17. 祭冰之人
18. 冰风迷途的勇士
19. 平息鸣雷的尊者
20. 渡过烈火的贤人
21. 被怜爱的少女
22. 角斗士的终幕礼
23. 翠绿之影
24. 流浪大地的乐团
25. 如雷的盛怒
26. 炽烈的炎之魔女
27. 昔日宗室之仪
28. 染血的骑士道
29. 悠古的磐岩
30. 逆飞的流星
31. 沉沦之心
32. 千岩牢固
33. 苍白之火
34. 追忆之注连
35. 绝缘之旗印
36. 华馆梦醒形骸记
37. 海染砗磲

# 总结

![总结图](README.assets/总结图.png)
